<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="/css/postbox.css">
<%- include('partials/head', {title: 'Create Thread'}) %>
<body>
    <%- include('partials/navbar', { activeId: '' }) %>
    <main class="p-4">
        <h1>Create Thread</h1>
        <div class="post-box-container">
            <div class="post-box">
                <div class="profile-section">
                    <img src="https://via.placeholder.com/50" alt="Avatar" class="avatar">
                    <span class="username">Username</span>
                </div>
                <textarea id="postContent" class="text-area" rows="4" placeholder="Start a chat..." maxlength="1000"></textarea>
                <div class="controls">
                    <div class="buttons">
                        <button class="action-button"><i class="bi bi-card-image"></i></button>
                        <button class="action-button"><i class="bi bi-camera-video"></i></button>
                        <button class="action-button"><i class="bi bi-emoji-smile"></i></button>
                        <button class="action-button"><i class="bi bi-calculator"></i></button>
                    </div>
                    <div class="character-counter">
                        <span id="charCount">0</span>/1000
                    </div>
                </div>
                <button id="postButton" class="submit-button" disabled>Post</button>
            </div>
        </div>
        <div class="container mt-4">
            <h1>Create Post</h1>
            <form action="/post/create" method="POST">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <div class="mb-3">
                    <textarea 
                        class="form-control" 
                        name="content" 
                        rows="4" 
                        maxlength="1000" 
                        required
                    ></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Post</button>
            </form>
        </div>
    </main>
    <script>
        const textarea = document.getElementById('postContent');
        const charCount = document.getElementById('charCount');
        const postButton = document.getElementById('postButton');

        textarea.addEventListener('input', () => {
            const length = textarea.value.length;
            charCount.textContent = length;
            postButton.disabled = length === 0 || length > 1000;
        });
    </script>
</body>
</html>
